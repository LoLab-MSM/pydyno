language: python
sudo: required
dist: trusty
env:
- PYVER=3.6
before_install:
- wget http://repo.continuum.io/miniconda/Miniconda${PYVER:0:1}-latest-Linux-x86_64.sh
    -O miniconda.sh
- chmod +x miniconda.sh
- bash miniconda.sh -b -p $HOME/miniconda
- export PATH="$HOME/miniconda/bin:$PATH"
- conda install --yes -c conda-forge python="$PYVER" numpy scipy matplotlib sympy
  nose h5py pandas scikit-learn coveralls cython editdistance pathos hdbscan networkx
  pydot
- conda install --yes -c alubbock pysb
- if [[ $PYVER == 2.7 ]]; then conda update --yes numpy; fi
- pip install anytree
- mkdir -p ~/.config/matplotlib
- echo "backend:Agg" > ~/.config/matplotlib/matplotlibrc
install: python setup.py build --build-lib=build/lib
script: nosetests build/lib/pydyno --with-coverage --cover-package=build/lib/pydyno
after_success: coveralls
deploy:
  provider: pypi
  distributions: sdist bdist_wheel
  username: ortega2247
  password:
    secure: cgrV/W3nbtSU1fe3GMIp80Q2jp5Bxe2oTfrikDXEWpeVVCd7sGqYI2akq1VDXHefOF9kTeo0w8CAPynIhd24HNyi7/+fuRqtbf59Y/HUGvPLcldTgi4xw72InhJ5tf61IawbZhEWDYIa64fgZQyWpiFPH6PODTVdFF97GtfaTHv8sAb0bxo27tAj7+VAxUg5AiLUdAUg7Grkkof/AesSz8qOBF43GuliASqCwOcHOYyql0FOxmlFMgskII0Z24XUEPtj4IFRF/gAe+92oa8utYWYIyG5pO7QfSrtI+hrUZP9ffRQ+0GkGmEaY9pij8kSMKdROnRamlp8eXXfl/Z20ZDPQz6V4KDqfC8NgqIYnlvJyUF7iUutFgDdETJjbuiKqAtROEISv+TQyEU1dzLGPDObfppTI4YSb//D+t8vuKQu8FMRSYSHHDtV1y1Kjf2L0DqJJ7c03m2gp9C5ykB/R2cXUZo8GKATBfgta8RO/wOjUTn8GNq2vTgokr5iHgcw2mpqr1bUCp/LuZk8h56e55x41xsTY1McPcmEnbbUPeFs29Z/leABRaLwAsoVF7/ykO33czfnFjT8YFU5FR4njfILepJmVfs3SDb3r620lLcaA+inzwyezQwl9izwM644dFzdiX4lCapei7fJUHjcVKLfghgPgiVtZv7aGaS4j3o=
  on:
    tags: true
notifications:
  slack: lopezlab:mKQHRW1hyvJVLCX8ZWSgwhRY
