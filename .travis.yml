language: python
sudo: required
dist: trusty
env:
- PYVER=3.6
before_install:
- wget http://repo.continuum.io/miniconda/Miniconda${PYVER:0:1}-latest-Linux-x86_64.sh
    -O miniconda.sh
- chmod +x miniconda.sh
- bash miniconda.sh -b -p $HOME/miniconda
- export PATH="$HOME/miniconda/bin:$PATH"
- conda install --yes -c conda-forge python="$PYVER" numpy scipy matplotlib sympy
  nose h5py pandas scikit-learn coveralls cython editdistance pathos hdbscan networkx
  pydot
- conda install --yes -c alubbock pysb
- if [[ $PYVER == 2.7 ]]; then conda update --yes numpy; fi
- pip install anytree
- mkdir -p ~/.config/matplotlib
- echo "backend:Agg" > ~/.config/matplotlib/matplotlibrc
install: python setup.py build --build-lib=build/lib
script: nosetests build/lib/pydyno --with-coverage --cover-package=build/lib/pydyno
after_success: coveralls
deploy:
  provider: pypi
  distributions: sdist bdist_wheel
  username: ortega2247
  password:
    secure: hGLQPyMrZ+o+N5EA2vcMUEwuYCwb9wszrjvSTjdJkzUc2aF6mdQeB3BEierBF+F2+15Nh/VEnWncJcubWvVwyhgGNVNmgao1l3dddNOPMACB5mO6jgqT+vCtflh3tN+Au8F4KikyByRBBGoYcvwqvzZhNHoOtpqZ8fx8nTYmmr5CPHG/TJxCmGrTXMwIyONHt4DOu5hl9D/OBsbbBELW4jFC2lhFaTtFJCjIYkPGJVwT2YgUr4dtA+f/fQOlb7JWbF3VM077Gpm7xoLDZ5V6AbLTVzQqrw3VbYQHk2jhp9o+OkCmcsieCtodk/ph6aBMPkkjR8R+rskCbDCH3/ABTUIAJh++bcOoTEEimwpGnANWcvoMLRj4bDKOokGGjtRcJk64ximsY9/n5qSy4nuvUO9vI/u8ZZrHh2mJDV9x5maplCsvZRNsxXs57qNoZYyKzoFIwswWtLAMEH+8ni8k/mFci9V+QOJq/DosGbInXCrtKOo+z9Ig0jQ8cnpzObQavbBflNV3NbOjJI6eDRxW0HJFK6DfhrQUhI67aJighdIprn6LxKnPEBBSqWUmJWH7CjZFFC3iUzSZAJ6kaP7Mc9Vb/QUMp4MD6ojoMPeoHDOZlNmN/VjbgYeAds44LeNOD78GIfjwTEWvUpE80scIPklgS5ABkwlIVsLBZN1N1O8=
  on:
    tags: true
notifications:
  slack: lopezlab:mKQHRW1hyvJVLCX8ZWSgwhRY
